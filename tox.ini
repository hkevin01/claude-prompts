[tox]
envlist = py311,py312,lint,type-check,security
isolated_build = True

[testenv]
deps = 
    pytest>=8.0.0
    pytest-cov>=5.0.0
    hypothesis>=6.100.0
    PyYAML>=6.0.2
    requests>=2.32.0
    rich>=13.8.0
    aiohttp>=3.10.0
commands = pytest {posargs}

[testenv:lint]
deps = 
    black>=24.0.0
    isort>=5.13.0
    flake8>=7.0.0
    mypy>=1.11.0
commands = 
    black --check .
    isort --check-only .
    flake8
    mypy scripts/

[testenv:type-check]
deps = 
    mypy>=1.11.0
    types-PyYAML
    types-requests
commands = mypy scripts/

[testenv:security]
deps = 
    bandit>=1.7.0
    safety>=3.0.0
commands = 
    bandit -r scripts/
    safety check

[testenv:format]
deps = 
    black>=24.0.0
    isort>=5.13.0
commands = 
    black .
    isort .

[flake8]
max-line-length = 79
extend-ignore = E203, W503
exclude = .git,__pycache__,.tox,.venv,build,dist

[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True
